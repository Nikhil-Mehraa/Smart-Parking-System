{"ast":null,"code":"var _jsxFileName = \"/Users/nikhilmehra/Downloads/prototype/ise-prototype/frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport './App.css';\nimport { normalizeDate } from './TimeSelector';\nimport AnalyticsPage from \"./AnalyticsPage\";\nimport { io } from \"socket.io-client\";\n\n// At the TOP of App.js or index.js\nimport { Chart as ChartJS, ArcElement, CategoryScale, LinearScale, BarElement, Tooltip, Legend, Title } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(ArcElement, CategoryScale, LinearScale, BarElement, Tooltip, Legend, Title);\nfunction SlotGrid({\n  slots,\n  date,\n  start,\n  end,\n  endDate,\n  selectedSlots,\n  toggleSlotSelection,\n  availableSlotData\n}) {\n  function isSlotBooked(slot, date, start, end, endDate) {\n    if (slot.status === \"reserved\") return true;\n    if (!slot.bookings) return false;\n    const reqStart = new Date(`${date}T${start}:00`).getTime();\n    const reqEnd = new Date(`${endDate}T${end}:00`).getTime();\n    return slot.bookings.some(b => {\n      const bStart = new Date(`${b.date}T${b.start}:00`).getTime();\n      const bEnd = new Date(`${b.endDate}T${b.end}:00`).getTime();\n      return !(reqEnd <= bStart || reqStart >= bEnd);\n    });\n  }\n  if (!slots || slots.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slot-grid\",\n      children: \"No slots available\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"slot-grid\",\n    children: slots.map(slot => {\n      const booked = isSlotBooked(slot, date, start, end, endDate);\n      const available = slot.status === \"available\" && !booked;\n      const isSelected = selectedSlots.includes(slot.id);\n      const slotData = availableSlotData.find(s => s.id === slot.id);\n      let className = \"slot\";\n      if (isSelected) className += \" selected\";\n      if (booked || slot.status === \"reserved\") className += \" reserved\";\n      if (available) className += \" available\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: className,\n        onClick: () => toggleSlotSelection(slot.id),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Slot \", slot.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), slotData && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"slot-price\",\n          children: [\"\\u20AC\", slotData.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 26\n        }, this)]\n      }, slot.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n_c = SlotGrid;\nfunction TimeSelector({\n  date,\n  setDate,\n  start,\n  setStart,\n  end,\n  setEnd,\n  endDate,\n  setEndDate\n}) {\n  function normalizeDate(str) {\n    if (!str) return \"\";\n    if (/^\\d{2}[.\\-/]\\d{2}[.\\-/]\\d{4}$/.test(str)) {\n      const [dd, mm, yyyy] = str.split(/[.\\-/]/);\n      return `${yyyy}-${mm.padStart(2, \"0\")}-${dd.padStart(2, \"0\")}`;\n    }\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(str)) return str;\n    return \"\";\n  }\n  const safeDate = normalizeDate(date);\n  const safeEndDate = normalizeDate(endDate);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"time-selector\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Date\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"date\",\n      value: safeDate,\n      onChange: e => setDate(e.target.value),\n      placeholder: \"Date\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Start\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"time\",\n      value: start,\n      onChange: e => setStart(e.target.value),\n      placeholder: \"Start time\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"End\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"time\",\n      value: end,\n      onChange: e => setEnd(e.target.value),\n      placeholder: \"End time\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"End Date (if different)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"date\",\n      value: safeEndDate,\n      onChange: e => setEndDate(e.target.value),\n      placeholder: \"End Date\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_c2 = TimeSelector;\nfunction AnalyticsModal({\n  onClose\n}) {\n  _s();\n  const [analytics, setAnalytics] = useState({\n    slots: []\n  });\n  useEffect(() => {\n    fetch(\"http://localhost:4000/api/analytics\").then(res => res.json()).then(data => setAnalytics(data));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"analytics-modal\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Slot Analytics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"analytics-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Slot ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Total Bookings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Total Revenue (\\u20AC)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: analytics.slots.map(slot => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: slot.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: slot.totalBookings\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"\\u20AC\", slot.totalRevenue]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, slot.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      style: {\n        marginTop: \"20px\"\n      },\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(AnalyticsModal, \"r/BCuGzzxZM5E9ED42FpESOAEps=\");\n_c3 = AnalyticsModal;\nconst socket = io(\"http://localhost:4000\");\nexport default function App() {\n  _s3();\n  var _s2 = $RefreshSig$();\n  function todayStr() {\n    const now = new Date();\n    const yyyy = now.getFullYear();\n    const mm = String(now.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(now.getDate()).padStart(2, \"0\");\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  function normalizeDate(str) {\n    if (!str) return \"\";\n    if (/^\\d{2}[.\\-/]\\d{2}[.\\-/]\\d{4}$/.test(str)) {\n      const [dd, mm, yyyy] = str.split(/[.\\-/]/);\n      return `${yyyy}-${mm.padStart(2, \"0\")}-${dd.padStart(2, \"0\")}`;\n    }\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(str)) return str;\n    return todayStr();\n  }\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [slots, setSlots] = useState([]);\n  const [availableSlotData, setAvailableSlotData] = useState([]);\n  const [selectedSlots, setSelectedSlots] = useState([]);\n  const [date, setDate] = useState(todayStr());\n  const [start, setStart] = useState(\"09:00\");\n  const [end, setEnd] = useState(\"10:00\");\n  const [endDate, setEndDate] = useState(todayStr());\n  const [status, setStatus] = useState(\"\");\n  const [showAnalytics, setShowAnalytics] = useState(false);\n  useEffect(() => {\n    const currentUser = localStorage.getItem(\"currentUser\");\n    setIsAuthenticated(!!currentUser);\n  }, []);\n  useEffect(() => {\n    setDate(d => normalizeDate(d));\n    setEndDate(d => normalizeDate(d));\n  }, []);\n  useEffect(() => {\n    socket.on(\"slots\", setSlots);\n    return () => socket.off(\"slots\", setSlots);\n  }, []);\n  useEffect(() => {\n    fetch(\"http://localhost:4000/api/available-slots\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        date: normalizeDate(date),\n        start,\n        end,\n        endDate: normalizeDate(endDate)\n      })\n    }).then(res => res.json()).then(data => setAvailableSlotData(data.slots || []));\n  }, [date, start, end, endDate, slots]);\n  function AuthPage({\n    onAuthSuccess\n  }) {\n    _s2();\n    const [mode, setMode] = useState(\"signin\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [error, setError] = useState(\"\");\n    function handleSignUp(e) {\n      e.preventDefault();\n      if (!email || !password) return setError(\"Enter all fields\");\n      const users = JSON.parse(localStorage.getItem(\"users\") || \"{}\");\n      if (users[email]) return setError(\"Email already registered\");\n      users[email] = password;\n      localStorage.setItem(\"users\", JSON.stringify(users));\n      setMode(\"signin\");\n      setError(\"Sign up successful! Please sign in.\");\n      setEmail(\"\");\n      setPassword(\"\");\n    }\n    function handleSignIn(e) {\n      e.preventDefault();\n      const users = JSON.parse(localStorage.getItem(\"users\") || \"{}\");\n      if (!users[email]) return setError(\"User not found\");\n      if (users[email] !== password) return setError(\"Wrong password\");\n      localStorage.setItem(\"currentUser\", email);\n      onAuthSuccess();\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: mode === \"signin\" ? \"Sign In\" : \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: mode === \"signin\" ? handleSignIn : handleSignUp,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          placeholder: \"Email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"Password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: mode === \"signin\" ? \"Sign In\" : \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(prev => prev === \"signin\" ? \"signup\" : \"signin\"),\n        children: mode === \"signin\" ? \"Need an account? Sign Up\" : \"Have an account? Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  }\n  _s2(AuthPage, \"axoTVlUu5qjYsnD1BKudc+Et0Q4=\");\n  function handleAuthSuccess() {\n    setIsAuthenticated(true);\n  }\n  function handleLogout() {\n    localStorage.removeItem(\"currentUser\");\n    setIsAuthenticated(false);\n  }\n  function toggleSlotSelection(slotId) {\n    setSelectedSlots(prev => prev.includes(slotId) ? prev.filter(id => id !== slotId) : [...prev, slotId]);\n  }\n  function reserveSelectedSlots() {\n    if (selectedSlots.length === 0) return;\n    socket.emit(\"bookBulk\", {\n      slotIds: selectedSlots,\n      date: normalizeDate(date),\n      start,\n      end,\n      endDate: normalizeDate(endDate)\n    }, res => {\n      if (res.success) {\n        setStatus(`Successfully booked ${selectedSlots.length} slots.`);\n        setSelectedSlots([]);\n      } else {\n        setStatus(`Booking failed: ${res.msg}`);\n      }\n    });\n  }\n  const priceSum = availableSlotData.filter(s => selectedSlots.includes(s.id)).reduce((sum, s) => sum + (s.price || 0), 0);\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(AuthPage, {\n      onAuthSuccess: handleAuthSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Parking Slot Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"logout-btn\",\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TimeSelector, {\n      date: date,\n      setDate: setDate,\n      start: start,\n      setStart: setStart,\n      end: end,\n      setEnd: setEnd,\n      endDate: endDate,\n      setEndDate: setEndDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SlotGrid, {\n      slots: slots,\n      date: normalizeDate(date),\n      start: start,\n      end: end,\n      endDate: normalizeDate(endDate),\n      selectedSlots: selectedSlots,\n      toggleSlotSelection: toggleSlotSelection,\n      availableSlotData: availableSlotData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slot-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: reserveSelectedSlots,\n        disabled: selectedSlots.length === 0,\n        id: \"reserve-btn\",\n        children: \"Reserve Selected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"price-sum\",\n        children: priceSum > 0 && `Total: €${priceSum.toFixed(2)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAnalytics(true),\n        id: \"analytics-btn\",\n        children: \"Analytics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), showAnalytics && /*#__PURE__*/_jsxDEV(AnalyticsPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"cvwUS1VgTGv+vlY31tHk8s2Bx6s=\");\n_c4 = App;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"SlotGrid\");\n$RefreshReg$(_c2, \"TimeSelector\");\n$RefreshReg$(_c3, \"AnalyticsModal\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"names":["React","useEffect","useState","normalizeDate","AnalyticsPage","io","Chart","ChartJS","ArcElement","CategoryScale","LinearScale","BarElement","Tooltip","Legend","Title","jsxDEV","_jsxDEV","register","SlotGrid","slots","date","start","end","endDate","selectedSlots","toggleSlotSelection","availableSlotData","isSlotBooked","slot","status","bookings","reqStart","Date","getTime","reqEnd","some","b","bStart","bEnd","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","booked","available","isSelected","includes","id","slotData","find","s","onClick","price","_c","TimeSelector","setDate","setStart","setEnd","setEndDate","str","test","dd","mm","yyyy","split","padStart","safeDate","safeEndDate","type","value","onChange","e","target","placeholder","_c2","AnalyticsModal","onClose","_s","analytics","setAnalytics","fetch","then","res","json","data","totalBookings","totalRevenue","style","marginTop","_c3","socket","App","_s3","_s2","$RefreshSig$","todayStr","now","getFullYear","String","getMonth","getDate","isAuthenticated","setIsAuthenticated","setSlots","setAvailableSlotData","setSelectedSlots","setStatus","showAnalytics","setShowAnalytics","currentUser","localStorage","getItem","d","on","off","method","headers","body","JSON","stringify","AuthPage","onAuthSuccess","mode","setMode","email","setEmail","password","setPassword","error","setError","handleSignUp","preventDefault","users","parse","setItem","handleSignIn","onSubmit","required","prev","handleAuthSuccess","handleLogout","removeItem","slotId","filter","reserveSelectedSlots","emit","slotIds","success","msg","priceSum","reduce","sum","disabled","toFixed","_c4","$RefreshReg$"],"sources":["/Users/nikhilmehra/Downloads/prototype/ise-prototype/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport './App.css';\nimport { normalizeDate } from './TimeSelector';\nimport AnalyticsPage from \"./AnalyticsPage\";\n\n\nimport { io } from \"socket.io-client\";\n\n// At the TOP of App.js or index.js\nimport { Chart as ChartJS, ArcElement, CategoryScale, LinearScale, BarElement, Tooltip, Legend, Title } from 'chart.js';\nChartJS.register(ArcElement, CategoryScale, LinearScale, BarElement, Tooltip, Legend, Title);\n\n\nfunction SlotGrid({ slots, date, start, end, endDate, selectedSlots, toggleSlotSelection, availableSlotData }) {\n  function isSlotBooked(slot, date, start, end, endDate) {\n    if (slot.status === \"reserved\") return true;\n    if (!slot.bookings) return false;\n    const reqStart = new Date(`${date}T${start}:00`).getTime();\n    const reqEnd = new Date(`${endDate}T${end}:00`).getTime();\n    return slot.bookings.some(b => {\n      const bStart = new Date(`${b.date}T${b.start}:00`).getTime();\n      const bEnd = new Date(`${b.endDate}T${b.end}:00`).getTime();\n      return !(reqEnd <= bStart || reqStart >= bEnd);\n    });\n  }\n\n  if (!slots || slots.length === 0) {\n    return <div className=\"slot-grid\">No slots available</div>;\n  }\n\n  return (\n    <div className=\"slot-grid\">\n      {slots.map(slot => {\n        const booked = isSlotBooked(slot, date, start, end, endDate);\n        const available = slot.status === \"available\" && !booked;\n        const isSelected = selectedSlots.includes(slot.id);\n        const slotData = availableSlotData.find(s => s.id === slot.id);\n        let className = \"slot\";\n        if (isSelected) className += \" selected\";\n        if (booked || slot.status === \"reserved\") className += \" reserved\";\n        if (available) className += \" available\";\n        return (\n          <div\n            key={slot.id}\n            className={className}\n            onClick={() => toggleSlotSelection(slot.id)}\n          >\n            <p>Slot {slot.id}</p>\n            {slotData && <p className=\"slot-price\">€{slotData.price}</p>}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction TimeSelector({ date, setDate, start, setStart, end, setEnd, endDate, setEndDate }) {\n  function normalizeDate(str) {\n    if (!str) return \"\";\n    if (/^\\d{2}[.\\-/]\\d{2}[.\\-/]\\d{4}$/.test(str)) {\n      const [dd, mm, yyyy] = str.split(/[.\\-/]/);\n      return `${yyyy}-${mm.padStart(2, \"0\")}-${dd.padStart(2, \"0\")}`;\n    }\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(str)) return str;\n    return \"\";\n  }\n  const safeDate = normalizeDate(date);\n  const safeEndDate = normalizeDate(endDate);\n  return (\n    <div className=\"time-selector\">\n      <label>Date</label>\n      <input type=\"date\" value={safeDate} onChange={(e) => setDate(e.target.value)} placeholder=\"Date\" />\n      <label>Start</label>\n      <input type=\"time\" value={start} onChange={(e) => setStart(e.target.value)} placeholder=\"Start time\" />\n      <label>End</label>\n      <input type=\"time\" value={end} onChange={(e) => setEnd(e.target.value)} placeholder=\"End time\" />\n      <label>End Date (if different)</label>\n      <input type=\"date\" value={safeEndDate} onChange={(e) => setEndDate(e.target.value)} placeholder=\"End Date\" />\n    </div>\n  );\n}\n\nfunction AnalyticsModal({ onClose }) {\n  const [analytics, setAnalytics] = useState({ slots: [] });\n  useEffect(() => {\n    fetch(\"http://localhost:4000/api/analytics\")\n      .then(res => res.json())\n      .then(data => setAnalytics(data));\n  }, []);\n  return (\n    <div className=\"analytics-modal\">\n      <h2>Slot Analytics</h2>\n      <table className=\"analytics-table\">\n        <thead>\n          <tr>\n            <th>Slot ID</th>\n            <th>Total Bookings</th>\n            <th>Total Revenue (€)</th>\n          </tr>\n        </thead>\n        <tbody>\n          {analytics.slots.map(slot => (\n            <tr key={slot.id}>\n              <td>{slot.id}</td>\n              <td>{slot.totalBookings}</td>\n              <td>€{slot.totalRevenue}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <button onClick={onClose} style={{ marginTop: \"20px\" }}>Close</button>\n    </div>\n  );\n}\n\nconst socket = io(\"http://localhost:4000\");\n\nexport default function App() {\n  function todayStr() {\n    const now = new Date();\n    const yyyy = now.getFullYear();\n    const mm = String(now.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(now.getDate()).padStart(2, \"0\");\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  function normalizeDate(str) {\n    if (!str) return \"\";\n    if (/^\\d{2}[.\\-/]\\d{2}[.\\-/]\\d{4}$/.test(str)) {\n      const [dd, mm, yyyy] = str.split(/[.\\-/]/);\n      return `${yyyy}-${mm.padStart(2, \"0\")}-${dd.padStart(2, \"0\")}`;\n    }\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(str)) return str;\n    return todayStr();\n  }\n\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [slots, setSlots] = useState([]);\n  const [availableSlotData, setAvailableSlotData] = useState([]);\n  const [selectedSlots, setSelectedSlots] = useState([]);\n  const [date, setDate] = useState(todayStr());\n  const [start, setStart] = useState(\"09:00\");\n  const [end, setEnd] = useState(\"10:00\");\n  const [endDate, setEndDate] = useState(todayStr());\n  const [status, setStatus] = useState(\"\");\n  const [showAnalytics, setShowAnalytics] = useState(false);\n\n  useEffect(() => {\n    const currentUser = localStorage.getItem(\"currentUser\");\n    setIsAuthenticated(!!currentUser);\n  }, []);\n\n  useEffect(() => {\n    setDate(d => normalizeDate(d));\n    setEndDate(d => normalizeDate(d));\n  }, []);\n\n  useEffect(() => {\n    socket.on(\"slots\", setSlots);\n    return () => socket.off(\"slots\", setSlots);\n  }, []);\n\n  useEffect(() => {\n    fetch(\"http://localhost:4000/api/available-slots\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ date: normalizeDate(date), start, end, endDate: normalizeDate(endDate) }),\n    })\n      .then(res => res.json())\n      .then(data => setAvailableSlotData(data.slots || []));\n  }, [date, start, end, endDate, slots]);\n\n  function AuthPage({ onAuthSuccess }) {\n    const [mode, setMode] = useState(\"signin\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [error, setError] = useState(\"\");\n\n    function handleSignUp(e) {\n      e.preventDefault();\n      if (!email || !password) return setError(\"Enter all fields\");\n      const users = JSON.parse(localStorage.getItem(\"users\") || \"{}\");\n      if (users[email]) return setError(\"Email already registered\");\n      users[email] = password;\n      localStorage.setItem(\"users\", JSON.stringify(users));\n      setMode(\"signin\");\n      setError(\"Sign up successful! Please sign in.\");\n      setEmail(\"\");\n      setPassword(\"\");\n    }\n\n    function handleSignIn(e) {\n      e.preventDefault();\n      const users = JSON.parse(localStorage.getItem(\"users\") || \"{}\");\n      if (!users[email]) return setError(\"User not found\");\n      if (users[email] !== password) return setError(\"Wrong password\");\n      localStorage.setItem(\"currentUser\", email);\n      onAuthSuccess();\n    }\n\n    return (\n      <div className=\"auth-card\">\n        <h2>{mode === \"signin\" ? \"Sign In\" : \"Sign Up\"}</h2>\n        <form onSubmit={mode === \"signin\" ? handleSignIn : handleSignUp}>\n          <input\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            placeholder=\"Email\"\n            required\n          />\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"Password\"\n            required\n          />\n          <button type=\"submit\">{mode === \"signin\" ? \"Sign In\" : \"Sign Up\"}</button>\n        </form>\n        {error && <div className=\"status-message\">{error}</div>}\n        <button onClick={() => setMode((prev) => (prev === \"signin\" ? \"signup\" : \"signin\"))}>\n          {mode === \"signin\" ? \"Need an account? Sign Up\" : \"Have an account? Sign In\"}\n        </button>\n      </div>\n    );\n  }\n\n  function handleAuthSuccess() {\n    setIsAuthenticated(true);\n  }\n\n  function handleLogout() {\n    localStorage.removeItem(\"currentUser\");\n    setIsAuthenticated(false);\n  }\n\n  function toggleSlotSelection(slotId) {\n    setSelectedSlots((prev) =>\n      prev.includes(slotId) ? prev.filter((id) => id !== slotId) : [...prev, slotId]\n    );\n  }\n\n  function reserveSelectedSlots() {\n    if (selectedSlots.length === 0) return;\n    socket.emit(\n      \"bookBulk\",\n      {\n        slotIds: selectedSlots,\n        date: normalizeDate(date),\n        start,\n        end,\n        endDate: normalizeDate(endDate),\n      },\n      (res) => {\n        if (res.success) {\n          setStatus(`Successfully booked ${selectedSlots.length} slots.`);\n          setSelectedSlots([]);\n        } else {\n          setStatus(`Booking failed: ${res.msg}`);\n        }\n      }\n    );\n  }\n\n  const priceSum = availableSlotData\n    .filter((s) => selectedSlots.includes(s.id))\n    .reduce((sum, s) => sum + (s.price || 0), 0);\n\n  if (!isAuthenticated) {\n    return <AuthPage onAuthSuccess={handleAuthSuccess} />;\n  }\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>Parking Slot Booking</h1>\n        <button onClick={handleLogout} className=\"logout-btn\">Log Out</button>\n      </header>\n      <TimeSelector\n        date={date}\n        setDate={setDate}\n        start={start}\n        setStart={setStart}\n        end={end}\n        setEnd={setEnd}\n        endDate={endDate}\n        setEndDate={setEndDate}\n      />\n      <SlotGrid\n        slots={slots}\n        date={normalizeDate(date)}\n        start={start}\n        end={end}\n        endDate={normalizeDate(endDate)}\n        selectedSlots={selectedSlots}\n        toggleSlotSelection={toggleSlotSelection}\n        availableSlotData={availableSlotData}\n      />\n      <div className=\"slot-actions\">\n        <button\n          onClick={reserveSelectedSlots}\n          disabled={selectedSlots.length === 0}\n          id=\"reserve-btn\"\n        >\n          Reserve Selected\n        </button>\n        <span className=\"price-sum\">\n          {priceSum > 0 && `Total: €${priceSum.toFixed(2)}`}\n        </span>\n        <button\n          onClick={() => setShowAnalytics(true)}\n          id=\"analytics-btn\"\n        >\n          Analytics\n        </button>\n      </div>\n      <div className=\"status\">{status}</div>\n      {showAnalytics && <AnalyticsPage />}\n\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}